{% extends "base.html" %}

{% block title %}{{ accion }} Título - CineHub{% endblock %}

{% block content %}
<div class="container">
    <div class="form-container">
        <div class="form-header">
            <h1>
                <i class="fas fa-film"></i>
                {{ accion }} Título
            </h1>
            <a href="/web/titulos" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Volver
            </a>
        </div>

        <form method="post"  class="data-form" enctype="multipart/form-data">
            <div class="form-group">
                <label><i class="fas fa-heading"></i> Título:</label>
                <input type="text" name="titulo" value="{% if titulo %}{{ titulo.titulo }}{% endif %}" required>
            </div>

           <div class="form-group">
                <label><i class="fas fa-theater-masks"></i> Género:</label>
                {% set lista_generos = [
                    'Acción', 'Aventura', 'Animación', 'Biografía', 'Ciencia Ficción',
                    'Comedia', 'Crimen', 'Documental', 'Drama', 'Familia',
                    'Fantasía', 'Historia', 'Misterio', 'Musical', 'Romance',
                    'Suspenso', 'Terror', 'Western'
                ] %}

                <select name="genero" required>
                    <option value="" disabled {% if not titulo %}selected{% endif %}>Seleccione un género</option>
                    {% for g in lista_generos %}
                        <option value="{{ g }}" {% if titulo and titulo.genero == g %}selected{% endif %}>
                            {{ g }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label><i class="fas fa-calendar"></i> Año de Estreno:</label>
                    <input type="number" name="anio_estreno" value="{% if titulo %}{{ titulo.anio_estreno }}{% endif %}"
                           min="1900" max="2030" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-clock"></i> Duración (minutos) o numero temporadas:</label>
                    <input type="number" name="duracion" value="{% if titulo %}{{ titulo.duracion }}{% endif %}"
                           min="1" required>
                </div>
            </div>

            <div class="form-group">
                <label><i class="fas fa-envelope"></i> Imagen:</label>
                <input type="file" name="img" value="{% if titulo %}{{ titulo.img }}{% endif %}" required>
            </div>

            <div class="form-group">
                <label><i class="fas fa-align-left"></i> Descripción:</label>
                <textarea name="descripcion" rows="4" required>{% if titulo %}{{ titulo.descripcion }}{% endif %}</textarea>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn {% if accion == 'Crear' %}btn-success{% else %}btn-primary{% endif %}">
                    <i class="fas fa-save"></i> {{ accion }}
                </button>
                <a href="/web/titulos" class="btn btn-secondary">Cancelar</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
